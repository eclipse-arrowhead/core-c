cmake_minimum_required(VERSION 3.15)

project(mbedtls-download)

include(ExternalProject)

ExternalProject_Add(
        MbedTLS
        GIT_REPOSITORY          https://github.com/Mbed-TLS/mbedtls.git
        GIT_TAG                 v3.1.0
        GIT_PROGRESS            TRUE
        USES_TERMINAL_DOWNLOAD  TRUE
        USES_TERMINAL_UPDATE    TRUE
        USES_TERMINAL_CONFIGURE TRUE
        USES_TERMINAL_BUILD     TRUE
        USES_TERMINAL_INSTALL   TRUE
        SOURCE_DIR              "${CMAKE_CURRENT_BINARY_DIR}/mbedtls-src"
        BINARY_DIR              "${CMAKE_CURRENT_BINARY_DIR}/mbedtls-build"
        INSTALL_DIR             "${CMAKE_CURRENT_BINARY_DIR}/mbedtls-install"
        CONFIGURE_COMMAND       "${CMAKE_COMMAND}" -G "${CMAKE_GENERATOR}" -DENABLE_PROGRAMS=OFF -DENABLE_TESTING=OFF -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR> <SOURCE_DIR>
)
